const e=Symbol("mount"),t=Symbol("mounted"),n=Symbol("update"),l=Symbol("updated"),o=Symbol("unmount"),r={};function i(e,t){e[0]&&(e[1]=e[0](e[1],t))}function u(e,t){for(let n in e)i(e[n],t)}const s=[],c=Symbol("limitNode"),a={innerHTML:1,textContent:1,contenteditable:1},f={style:1},d={id:1,className:1,checked:1,value:1,selected:1},h=e=>"function"==typeof e;function p(e,t,n,l,o,r){if(n=null==n?null:n,l=null==l?null:l,(t="class"!=t||o?t:"className")in e&&d[t]&&(n=e[t]),l!==n)if("o"!=t[0]||"n"!=t[1]||!h(l)&&!h(n))switch(t){case"key":e.dataset.key=l;break;case"ref":l&&(l.current=e);break;case"style":!function(e,t,n){let l,o=e.style;if("object"==typeof t){l=!0;for(let e in t)e in n||m(o,e,null)}if("object"==typeof n)for(let e in n){let r=n[e];l&&t[e]===r||m(o,e,r)}else o.cssText=n}(e,n||"",l||"");break;default:!o&&"list"!=t&&t in e?e[t]=null==l?"":l:null==l?e.removeAttribute(t):e.setAttribute(t,"object"==typeof l?JSON.stringify(l):l)}else!function(e,t,n,l){t=t.slice("-"==t[2]?3:2),l.handleEvent||(l.handleEvent=t=>l[t.type].call(e,t)),n?(l[t]||e.addEventListener(t,l),l[t]=n):l[t]&&(e.removeEventListener(t,l),delete l[t])}(e,t,l,r)}function m(e,t,n){let l="setProperty";null==n&&(l="removeProperty",n=null),~t.indexOf("-")?e[l](t,n):e[t]=n}let y=g(null,{children:""}),b=g(null,{children:s});const v=Symbol("mapChildren"),k=Symbol("keyes");function g(e,t,...n){return{children:n,...t,nodeType:e||null}}function w(e){let t=typeof e;return null==e||"string"==t||"number"==t||"function"==t||"boolean"==t}const N=e=>e instanceof Node,C=e=>e[c]=e.appendChild(new Comment);function _(e,t,n,l){let o=e[c];if(!o){let{childNodes:t}=e,n=t.length;for(let e=0;e<n;e++){let e=t[n];if(e instanceof Comment){o=e;break}}}o||(o=C(e)),e[l?"appendChild":"insertBefore"](t,n||o)}function S(e,t,n="vnode"){return null!=e&&"object"==typeof e&&"host"!=e.nodeType&&(e=g("host",{children:e})),function e(t,n,l,o){let{vnode:r,handlers:i={}}=n&&n[t]||{};if(r==l&&null!=r)return n;var u;l=w(l)?function(e){let t=typeof e;return null==e||"boolean"==t||"function"==t}(u=l)?y:g(null,{children:""+u}):l;let{nodeType:s,shadowDom:d,children:h,is:m,...v}=r||b,{nodeType:S,shadowDom:x,children:j,is:A,...E}=l;if(o=o||"svg"==S,"host"!=S&&(!function(e,t){let n=e&&N(e),l=t&&N(t);if(l&&n)return l==l;if(e){e.localName||(e.localName=e.nodeName.toLowerCase());let n=e.localName;return("#text"==n?null:n)==t}}(n,S)||m!=A)){let e=function(e,t,n){let l,o=document;if(null!=e){if(N(e))return e;l=t?o.createElementNS("http://www.w3.org/2000/svg",e):o.createElement(e,n?{is:n}:null)}else l=o.createTextNode("");return l}(S,o,A),t=n&&n.parentNode;t&&t.replaceChild(e,n),n=e,i={}}if(f[S]&&(S=null,j=j.join("")),null==S)n.textContent!=j&&(n.textContent=j);else{if(d!=x){let{shadowRoot:e}=n,t=x&&!e?"open":!x&&e?"closed":0;t&&n.attachShadow({mode:t})}(function(e,t,n,l,o){t=t||{};for(let r in t)r in n||p(e,r,t[r],null,l,o);let r;for(let i in n)p(e,i,t[i],n[i],l,o),r=r||a[i];return r})(n,v,E,o,i)||h==j||function(t,n,l,o,r){let i=l.length,{childNodes:u}=n,s={},a=u.length,f=0,d=n[c];for(;f<a;f++){let e=u[f];if(e==d||e instanceof Comment){d=e;break}if(o){let t=e.dataset.key;if(o.includes(t)){s[t]=e;continue}}(o||f>=i)&&(f--,a--,e.remove())}d||(d=C(n));for(let c=0;c<i;c++){let i=l[c],a=c==f?null:u[c],h=o?i.key:c,p=o?s[h]:a;o&&p&&p!=a&&n.insertBefore(p,a);let m=e(t,p,i,r);p||(_(n,m,c==f?d:u[c]),f++)}}(t,x?n.shadowRoot:n,j,E[k],o)}return n[t]={vnode:l,handlers:i},n}(n,t,e=function e(t){if(w(t))return t;if(!t[v]){let{children:n,keyes:l}=function t(n,l={children:[]},o=0){if((e=>Array.isArray(e))(n)){let e=n.length;for(let r=0;r<e;r++)t(n[r],l,o+1)}else{if(null==n&&!o)return l;let r=e(n);if(null!=r&&"object"==typeof r){if(h(r.nodeType)){let{nodeType:e,...n}=r;return t(e(n),l,o+1)}let{key:e}=r;null!=e&&(e+="",l.keyes=l.keyes||[],l.keyes.includes(e)||l.keyes.push(e))}l.children.push(r)}return l}(t.children);t.children=n.length?n:s,l&&l.length==n.length&&(t[k]=l),t[v]=!0}return t}(e)),t}class x extends HTMLElement{constructor(){super(),this._create()}async _update(){if(!this._prevent){let e;this._prevent=!0,this.updated=new Promise(t=>e=t),await this.mounted,this._prevent=!1,this.update(),e()}}static get observedAttributes(){let{props:e={}}=this,t=[],n=[];for(let l in e)T(this.prototype,l,e[l],n,t);return this.prototype._create=function(){this._attrs={},this._props={},t.forEach(e=>e(this)),this.mounted=new Promise(e=>this.mount=e),this.unmounted=new Promise(e=>this.unmount=e),this.create&&this.create(),this._update()},n}attributeChangedCallback(e,t,n){e!==this._ignoreAttr&&t!==n&&(this[this._attrs[e]]=n)}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}}const j=[!0,1,"","1","true"],A=[Function,null],E=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase();function T(e,t,n,l,o){if(!(t in e)){let{type:r,reflect:i,event:u,value:s,attr:c=E(t)}="object"==typeof n&&null!=n?n:{type:n},a=!A.includes(r);l.push(c),Object.defineProperty(e,t,{set:function(e){let n=this[t],{error:l,value:o}=function(e,t){if(null==e)return{value:t};try{if(e==Boolean?t=j.includes(t):"string"==typeof t&&(t=e==Number?Number(t):e==Object||e==Array?JSON.parse(t):t),{}.toString.call(t)==`[object ${e.name}]`)return{value:t,error:e==Number&&Number.isNaN(t)}}catch(e){}return{value:t,error:!0}}(r,a&&h(e)?e(n):e);if(l&&null!=o)throw`The value defined for prop '${t}' must be of type '${r.name}'`;n!=o&&(this._props[t]=o,this._update(),this.updated.then(()=>{u&&((e,t,n)=>{e.dispatchEvent(new CustomEvent(t,"object"==typeof n?n:null))})(this,u),i&&(this._ignoreAttr=c,((e,t,n,l)=>{null==l||t==Boolean&&!l?e.removeAttribute(n):e.setAttribute(n,"object"==typeof l?JSON.stringify(l):t==Boolean?"":l)})(this,r,c,this[t]),this._ignoreAttr=null)}))},get(){return this._props[t]}}),o.push(e=>{null!=s&&(e[t]=s),e._attrs[c]=t})}}function L(s){let c=class extends x{async create(){let c=Symbol();this.update=()=>{S(a.load(s,{...this._props}),this,c),a.updated()};let a=function(s,c){let a,f={},d={use:function(t,l){let o,u=r.index++;return f[u]||(f[u]=[null,l],o=1),f[u][0]=t,i(f[u],o?e:n),f[u]},load:function(e,t){r.index=0,r.ref=h;let n=e(t);return r.ref=0,n},updated:function(){let e=a?l:t;a=1,u(f,e)},unmount:function(){u(f,o)}},h={hook:d,host:c,render:s};return d}(()=>this._update(),this);await this.unmounted,a.unmount()}};return c.props=s.props,c}function O(){return function(e,t){if(r.ref.hook)return r.ref.hook.use(e,t)[1]}(0,{current:r.ref.host})}function P(){let[e,t]=function(e){let t=O();if(e in t.current)return t[e]||(t[e]=[null,n=>t.current[e]=n]),t[e][0]=t.current[e],t[e]}("count");return g("host",{shadowDom:!0},g("style",null,"*{font-size:200%}span{width:4rem;display:inline-block;text-align:center}button{width:4rem;height:4rem;border:none;border-radius:10px;background-color:#2e8b57;color:#fff}"),g("button",{onclick:()=>t(e-1)},"-"),g("span",null,e),g("button",{onclick:()=>t(e+1)},"+"))}P.props={count:{type:Number,reflect:!0,value:0,event:{type:"ChangeCount"}}},((e,t)=>{h(e)?L(e):customElements.define(e,L(t))})("atomico-counter",P);
//# sourceMappingURL=atomico-counter.js.map
